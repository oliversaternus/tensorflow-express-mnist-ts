(this["webpackJsonpdigit-classifier-frontend"]=this["webpackJsonpdigit-classifier-frontend"]||[]).push([[0],[,,,,,,function(e,t,n){e.exports=n(17)},,,,,function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a,r,c=n(0),o=n.n(c),i=n(5),s=n.n(i),l=(n(11),n(1)),u=n.n(l),f=n(2),v=n(3),d=!1,m=0,h=0,p=0,g=0,E=!1,w=function(e,t){"down"===e&&(m=h,p=g,h=t.clientX-a.offsetLeft,g=t.clientY-a.offsetTop,d=!0,!0&&(r.beginPath(),r.fillStyle="#415f78",r.fillRect(h,g,2,2),r.closePath(),!1)),"up"!==e&&"out"!==e||(d=!1),"move"===e&&d&&(m=h,p=g,h=t.clientX-a.offsetLeft,g=t.clientY-a.offsetTop,r.beginPath(),r.moveTo(m,p),r.lineTo(h,g),r.strokeStyle="#415f78",r.lineWidth=48,r.stroke(),r.closePath(),r.beginPath(),r.arc(m,p,23.5,0,2*Math.PI),r.fillStyle="#415f78",r.fill(),r.closePath(),r.beginPath(),r.arc(h,g,23.5,0,2*Math.PI),r.fillStyle="#415f78",r.fill(),r.closePath())},b=function(){if(E)return r.getImageData(0,0,420,420)},x=function(){if(E)return a.toDataURL()};function y(e){for(var t=[],n=0;n<420;n++){for(var a=[],r=0;r<420;r++)a.push(e.data[4*(420*n+r)+3]);t.push(a)}return t}function k(e){for(var t=[],n=0;n<28;n++){for(var a=[],r=0;r<28;r++){for(var c=0,o=0;o<15;o++)for(var i=0;i<15;i++)c+=e[15*n+o][15*r+i];a.push(c/225)}t.push(a)}return t}function O(e){var t=function(e){for(var t=0,n=0,a=e.length-1,r=0,c=e.length-1,o=0,i=0,s=0;s<e.length;s++)for(var l=0;l<e[0].length;l++)t+=e[s][l]*s,n+=e[s][l]*l,i+=e[s][l],0!==e[s][l]&&(s<a&&(a=s),s>r&&(r=s),l<c&&(c=l),l>o&&(o=l));if(r<a||o<c)return!1;var u=Math.floor(t/i-e.length/2),f=Math.floor(n/i-e[0].length/2);return r-u>27&&(u=27-r),o-f>27&&(f=27-o),a-u<0&&(u=0-a),c-f<0&&(f=0-c),[u,f]}(e);if(t){for(var n=[],a=0;a<28;a++){for(var r=[],c=0;c<28;c++){var o=a+t[0],i=c+t[1];r[c]=o<0||o>27||i<0||i>27?0:e[o][i]}n=n.concat(r)}return n}}function N(e){return j.apply(this,arguments)}function j(){return(j=Object(f.a)(u.a.mark((function e(t){var n,a,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",void 0);case 2:return e.prev=2,e.next=5,fetch("/classify",{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify(t)});case 5:return n=e.sent,e.next=8,n.json();case 8:return a=e.sent,r=Number(a.prediction),e.abrupt("return",r);case 13:return e.prev=13,e.t0=e.catch(2),console.log(e.t0),e.abrupt("return",void 0);case 17:case"end":return e.stop()}}),e,null,[[2,13]])})))).apply(this,arguments)}n(13);var C=function(e){var t=e.onClick,n=e.children,a=e.style,r=e.className,c="button-container"+(r?" "+r:"");return o.a.createElement("div",{onClick:t,className:c,style:a},n)},P=(n(14),function(){return o.a.createElement("div",{className:"loading-container"},o.a.createElement("svg",{className:"loading-indicator",version:"1.1",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 64 64"},o.a.createElement("path",{d:"M31.9,63.7C14.4,63.7,0,49.3,0,31.9S14.4,0.3,31.9,0.3c4.7,0,9.4,1.1,13.9,3c1.4,0.6,1.9,2.2,1.4,3.6s-2.2,1.9-3.6,1.4\r C39.9,6.6,36,5.8,32.1,5.8c-14.4,0-26,11.6-26,26s11.6,26,26,26c10,0,19.1-5.5,23.5-14.7c1.7-3.6,2.5-7.5,2.5-11.4\r c0-2.8-0.3-5.3-1.1-7.8c-0.6-1.4,0.3-3,1.9-3.6c1.4-0.6,3,0.3,3.6,1.9c0.8,3,1.4,6.4,1.4,9.4c0,4.7-1.1,9.4-3,13.9\r C55.1,56.5,43.8,63.7,31.9,63.7z"})))}),S=(n(15),function(e){var t=e.open,n=Object(c.useState)(),a=Object(v.a)(n,2),r=a[0],i=a[1],s=Object(c.useState)(),l=Object(v.a)(s,2),d=l[0],m=l[1];Object(c.useEffect)((function(){return Object(f.a)(u.a.mark((function e(){var n,a,r,c,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t&&b()){e.next=3;break}return e.abrupt("return");case 3:return m(x()),a=y(n),r=k(a),c=O(r),e.next=9,N(c);case 9:o=e.sent,i(o);case 11:case"end":return e.stop()}}),e)})))(),function(){m(void 0),i(void 0)}}),[t]);var h=function(){var t=Object(f.a)(u.a.mark((function t(){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(n=e.onClose)&&n();case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return o.a.createElement(o.a.Fragment,null,t&&o.a.createElement("div",{className:"dialog-background"},o.a.createElement("div",{className:"dialog-content"},o.a.createElement("div",{className:"dialog-title"},"Recognizing"),o.a.createElement("div",{className:"dialog-main-container"},o.a.createElement("div",{className:"dialog-image-container"},d&&o.a.createElement("img",{alt:"",className:"dialog-image",src:d})),o.a.createElement("svg",{style:{fill:"rgb(43, 100, 146)",margin:12},width:"32px",height:"32px",version:"1.1",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 64 64"},o.a.createElement("path",{d:"M62.6,28.3l-7.5-8.8c-1.1-1.1-2.7-1.3-3.7-0.3c-1.1,1.1-1.3,2.7-0.3,3.7l5.3,6.4H2.7c-1.6,0-2.7,1.1-2.7,2.7s1.1,2.7,2.7,2.7h53.8l-5.3,6.4c-1.1,1.1-0.8,2.9,0.3,3.7c0.5,0.5,1.1,0.5,1.6,0.5c0.8,0,1.6-0.3,2.1-1.1l7.5-8.8C64.5,33.7,64.5,30.5,62.6,28.3z"})),void 0===r?o.a.createElement(P,null):r),o.a.createElement(C,{onClick:h},"OK"))))});n(16);var L=function(){var e=Object(c.useRef)(),t=Object(c.useState)(!1),n=Object(v.a)(t,2),i=n[0],s=n[1];Object(c.useEffect)((function(){var t;t=e.current,r=(a=t).getContext("2d"),a.addEventListener("mousemove",(function(e){w("move",e)}),!1),a.addEventListener("mousedown",(function(e){w("down",e)}),!1),a.addEventListener("mouseup",(function(e){w("up",e)}),!1),a.addEventListener("mouseout",(function(e){w("out",e)}),!1),a.addEventListener("touchmove",(function(e){var t=e.touches[0];w("move",new MouseEvent("mousemove",{clientX:t.clientX,clientY:t.clientY}))}),!1),a.addEventListener("touchstart",(function(e){var t=e.touches[0];w("down",new MouseEvent("mousedown",{clientX:t.clientX,clientY:t.clientY}))}),!1),a.addEventListener("touchend",(function(e){w("up",new MouseEvent("mouseup",{}))}),!1),E=!0}));var l=function(){var e=Object(f.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s(!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return o.a.createElement("div",{className:"App"},o.a.createElement("div",{className:"info"},'Draw a digit on the canvas and click the "RECOGNIZE" button.'),o.a.createElement("canvas",{className:"canvas",ref:e,width:"420",height:"420"}),o.a.createElement(C,{onClick:l,style:{marginTop:12}},"RECOGNIZE"),o.a.createElement(S,{open:i,onClose:function(){E&&r.clearRect(0,0,420,420),s(!1)}}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(L,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[6,1,2]]]);
//# sourceMappingURL=main.b536b5c3.chunk.js.map